{% extends 'base.html' %}

{% block sheets %}
<link href="/static/results.css" rel="stylesheet">
{% endblock %}

{% block content %}
<div id="wrapper">
  <!--div id="filter">
    <h4>Filter by:</h4>
    <hr>
    <h3>Coming Soon</h3>
  </div-->

  <div id="results-cont">
    <table class="table">
      <h5>Showing results for &quot;{{ query }}&quot;  <small>{{ results|count }} item(s)</h5>
      {% if results|count == 0 %}
      <div id="tips">
	<p>Suggestions:</p>
	<ul>
	  <li>Entering an ISBN-13 is guaranteed to return a book if it's in our database - if it's not, it means no one's selling it</li>
	  <li>Course codes must be the full code e.g. econ0110, csci0160 (no space)</li>
	</ul>
      </div>
      {% endif %}
      {% for book in results %}
      <tr>
	<td class="image-td">
	  {% if book['image'] is not none %}
	  <a href="/book/{{ book['isbn'] }}"><image src={{ book['image'] }} alt="No Image" class="image-thumbnail img-responsive"></image></a>
	  {% else %}
	  <p>No Image Available</p>
	  {% endif %}
	</td>
	<td class="text-td">
	  <a href="/book/{{ book['isbn'] }}" class="lead">{{ book['title'] }}</a>
	  <p>ISBN: {{ book['isbn'] }}</p>
	  <p>
	    Authors:
	    {{ book['author'][0] }}
	    {% for author in book['author'][1:] %}
	    | {{ author }}
	    {% endfor %}
	  </p>
	  <p>
	    Courses:
	    {{ book['courses'][0] }}
	    {% for course in book['courses'][1:] %}
	    | {{ course }}
	    {% endfor %}
	  </p>
	  <p {% if book['post_count'] > 0 %} 
	    class="text-success">
	    {% else %} 
	    class="text-muted">
	    {% endif %}
	    Offers: {{ book['post_count'] }}
	  </p>
	</td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>
{% endblock %}
