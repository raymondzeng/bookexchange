import os
import psycopg2
import urlparse

# Postgresql reference
# http://zetcode.com/db/postgresqlpythontutorial/

# Setup connection
urlparse.uses_netloc.append("postgres")

# for deployment; make sure local and remote db are synced
#url = urlparse.urlparse(os.environ['DATABASE_URL'])

# local testing
url = urlparse.urlparse('postgresql://localhost/localdb')

conn = psycopg2.connect(
    database=url.path[1:],
    user=url.username,
    password=url.password,
    host=url.hostname,
    port=url.port
)

cur = conn.cursor()
#--

"""
# Create new Table
# change table_name and column_info accordingly
new_table_name = 'users'
column_info = '(email VARCHAR(100) PRIMARY KEY, password VARCHAR(20))'
cur.execute("CREATE TABLE " + new_table_name + column_info)
conn.commit()
"""

"""
# Delete Table
table_to_delete = "users"
cur.execute("DROP TABLE IF EXISTS " + table_to_delete)
conn.commit()
"""

"""
# Insert Row
cur.execute("INSERT INTO users VALUES(1,'admin','admin','Admin')")
conn.commit()
"""


# Get data
cur.execute("SELECT * FROM users")
rows = cur.fetchall()
for row in rows:
    print row

conn.close()
    
